{
  "_fv": 69,
  "_type": "procedure",
  "definition": {
    "procedurexml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable type=\"Boolean\" id=\"found\">found</variable><variable type=\"Number\" id=\"sx\">sx</variable><variable type=\"Number\" id=\"sy\">sy</variable><variable type=\"Number\" id=\"sz\">sz</variable><variable type=\"Number\" id=\"amplifier\">amplifier</variable></variables><block type=\"event_trigger\" deletable=\"false\" x=\"40\" y=\"40\"><field name=\"trigger\">entity_ticks</field><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"entity_haspotioneffect\"><field name=\"potion\">CUSTOM:TimedDestruction</field><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set_number\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:amplifier</field><value name=\"VAL\"><block type=\"entity_potioneffectlevel\"><field name=\"potion\">CUSTOM:TimedDestruction</field><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block></value><next><block type=\"java_code\"><field name=\"CODE\">if (entity.level().isClientSide) {&amp;#10;    return; // Server-side only&amp;#10;}&amp;#10;&amp;#10;Vec3 lookDirection = entity.getLookAngle();&amp;#10;BlockPos centerPos = BlockPos.containing(&amp;#10;    entity.getX() + lookDirection.x * 2,&amp;#10;    entity.getY() + lookDirection.y * 2 + 1,&amp;#10;    entity.getZ() + lookDirection.z * 2&amp;#10;);&amp;#10;&amp;#10;int radius = (int)amplifier;&amp;#10;if (radius &gt; 2) {&amp;#10;    radius = 2;&amp;#10;}&amp;#10;Random random = new Random();&amp;#10;boolean blocksBroken = false; // Track if any blocks were broken&amp;#10;&amp;#10;for (int i = -radius; i &lt;= radius; i++) {&amp;#10;    for (int j = -radius; j &lt;= radius; j++) {&amp;#10;        for (int k = -radius; k &lt;= radius; k++) {&amp;#10;            BlockPos targetPos = centerPos.offset(i, j, k);&amp;#10;            double distanceSquared = i*i + j*j + k*k;&amp;#10;            &amp;#10;            if (distanceSquared &gt; radius*radius) continue;&amp;#10;            &amp;#10;            BlockState blockState = entity.level().getBlockState(targetPos);&amp;#10;            if (blockState.isAir() || blockState.getDestroySpeed(entity.level(), targetPos) &lt; 0) {&amp;#10;                continue;&amp;#10;            }&amp;#10;&amp;#10;            // SILENTLY replace block with air&amp;#10;            entity.level().setBlock(targetPos, Blocks.AIR.defaultBlockState(), 3);&amp;#10;            blocksBroken = true;&amp;#10;            &amp;#10;            // 25% chance to spawn particles&amp;#10;            if (random.nextFloat() &lt; 0.1f &amp;&amp; entity.level() instanceof ServerLevel _level) {&amp;#10;                double spread = 0.5;&amp;#10;                &amp;#10;                _level.sendParticles(&amp;#10;                    (SimpleParticleType)(InvincibleCraftModParticleTypes.SMOKE.get()),&amp;#10;                    targetPos.getX() + 0.5 + random.nextGaussian() * spread,&amp;#10;                    targetPos.getY() + 0.5 + random.nextGaussian() * spread,&amp;#10;                    targetPos.getZ() + 0.5 + random.nextGaussian() * spread,&amp;#10;                    1, 0, 0, 0, 0.1&amp;#10;                );&amp;#10;&amp;#10;                _level.sendParticles(&amp;#10;                    ParticleTypes.CLOUD,&amp;#10;                    targetPos.getX() + 0.5 + random.nextGaussian() * spread,&amp;#10;                    targetPos.getY() + 0.5 + random.nextGaussian() * spread + 0.2,&amp;#10;                    targetPos.getZ() + 0.5 + random.nextGaussian() * spread,&amp;#10;                    1, 0, 0, 0, 0.15&amp;#10;                );&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;}&amp;#10;&amp;#10;// Apply screen shake if any blocks were broken (without particles)&amp;#10;if (blocksBroken &amp;&amp; entity instanceof ServerPlayer player) {&amp;#10;    // Create effect instance without particles&amp;#10;    MobEffectInstance shakeEffect = new MobEffectInstance(&amp;#10;        InvincibleCraftModMobEffects.SCREEN_SHAKE.get(),&amp;#10;        3, // 3 ticks duration&amp;#10;        0, // amplifier&amp;#10;        false, // ambient&amp;#10;        false, // visible&amp;#10;        false // show particles&amp;#10;    );&amp;#10;    &amp;#10;    player.addEffect(shakeEffect);&amp;#10;}</field></block></next></block></statement></block></next></block></xml>"
  }
}